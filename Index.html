<!DOCTYPE html>
<html>
    <head>
        <title>Hotel California Waitlist System</title>
        <link rel="stylesheet" href="./style.css">
    </head>

    <body>
        <h1>Hotel California Waitlist System</h1>



        <p class="m-content">There is <span id ="freespace">25</span> slots available</p>

        <div class="WaitingList m-table" >
            <table id="tab" style="display:none">
                <caption>Entry List</caption>
                <thread>
                    <tr>
                        <td>Serial No.</td>
                        <td>Name</td>
                        <td>Phone Number</td>
                        <td>Timestamp</td>
                    </tr>
                </thread>

                <tbody>

                </tbody>
            </table>
        </div>

        <div id="box" class="input" style="display:none">
            <input type = "text" name = "Name" id = "uName" placeholder="Name">
            <input type = "text" name = "Phone Number" id="uPhoneNumber" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')" placeholder="Phone Number" value=""> 
            <input type = "button" value = "AddCustomer" onclick="addData()">
            <input type = "button" value = "Settled" onclick="dele()">
        </div>

        <button onclick="showEntry()">Entry</button>

        <button onclick="displayTab()">Display</button>

        <button onclick="hideTab()">homepage</button>

        <script type="text/javascript" language="javascript">
            

            var tbody=document.querySelector("tbody");
            var box = document.getElementById("box");
            var freespace = 25;

            var serial = 0;

            function showEntry(){
                box.style.display ="block";
            }
            
            
            function addData(){
                if (freespace===0){
                    alert("There is no space left");
                } else {
                    // var serial = prompt("Serial No.");
                    // var Name = prompt("Name");
                    // var PhN = prompt("Phone Number");
                    
                    var Name = document.getElementById("uName").value;
                    var PhN = document.getElementById("uPhoneNumber").value;
                    if (Name==="" || PhN ===""){
                        alert("Please Input the Data");
                    }
                    else {
                        serial+=1
                        var tatr=document.createElement('tr');
                        var tatd1=document.createElement('td');
                        var tatd2=document.createElement('td');
                        var tatd3=document.createElement('td');
                        var tatd4=document.createElement('td');          
                        var timestamp = getdate();
                        tatd1.innerHTML = serial;
                        tatd2.innerHTML = Name;
                        tatd3.innerHTML = PhN;
                        tatd4.innerHTML = timestamp;
                        tatr.appendChild(tatd1);
                        tatr.appendChild(tatd2);
                        tatr.appendChild(tatd3);
                        tatr.appendChild(tatd4);
                        tbody.appendChild(tatr);
                        freespace-=1;
                        document.getElementById("freespace").innerHTML =freespace;
                        document.getElementById('uName').value = null
                        document.getElementById('uPhoneNumber').value = null
                    }
                }  
            }
            function dele(){
                if (freespace===25){
                    alert("No space to dele");
                } else {
                    freespace+=1;
                    document.getElementById("freespace").innerHTML =freespace;
                    tbody.deleteRow(1)
                }     
            }

            var myTable= document.getElementById('tab');

            function displayTab(){
                myTable.style.display ="block";
            }

            function hideTab(){
                myTable.style.display ="none";
                box.style.display = "none";
            }

            function getdate() {
                var now = new Date(),
                y = now.getFullYear(),
                m = now.getMonth() + 1,
                d = now.getDate();
                return y + "-" + (m < 10 ? "0" + m : m) + "-" + (d < 10 ? "0" + d : d) + " " + now.toTimeString().substr(0, 8);
        }
            
        </script>
    </body>
</html>